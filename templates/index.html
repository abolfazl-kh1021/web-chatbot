<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Chatbot</title>
    <link rel="stylesheet" href="../static/style.css">
</head>

<body class="light">

    <div class="settings">
        <button id="themeToggle">🌙 Dark</button>
        <input type="color" id="colorPicker" title="Change theme color">
    </div>

    <div class="chatbox">
        <h2>🤖 AI Chatbot</h2>

        <div class="messages" id="messages"></div>

        <div class="input-area">
            <input type="text" id="user_input" placeholder="Type your message..." autofocus>
            <button onclick="sendMessage()">Send</button>
        </div>
    </div>

    <script>
        // ✅ Send Message
        function sendMessage() {
            const userInput = document.getElementById('user_input').value;
            if (!userInput.trim()) return;

            const messagesDiv = document.getElementById('messages');
            messagesDiv.innerHTML += `<div class="user-message">${userInput}</div>`;

            fetch(`/get?msg=${userInput}`)
                .then(r => r.json())
                .then(data => {
                    messagesDiv.innerHTML += `<div class="bot-message">${data.response}</div>`;
                    document.getElementById('user_input').value = '';
                    messagesDiv.scrollTop = messagesDiv.scrollHeight;
                });
        }

        document.getElementById('user_input').addEventListener("keydown", function (e) {
            if (e.key === "Enter") sendMessage();
        });

        // ✅ Theme Toggle (Light / Dark)
        const themeBtn = document.getElementById("themeToggle");
        themeBtn.onclick = () => {
            document.body.classList.toggle("dark");
            themeBtn.textContent = document.body.classList.contains("dark") ? "☀️ Light" : "🌙 Dark";
        };

        // ✅ Custom Color Theme
        const colorPicker = document.getElementById("colorPicker");
        colorPicker.oninput = (e) => {
            document.documentElement.style.setProperty('--theme-color', e.target.value);
        };
    </script>

</body>

</html>